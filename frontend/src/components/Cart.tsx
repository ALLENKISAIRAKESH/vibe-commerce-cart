import React from 'react';import { addToCart } from '../api';export default function Cart({ items, onRemove }){ const total = items.reduce((s,i)=>s + i.price*i.qty, 0); async function updateQty(it, delta){ const next = it.qty + delta; if(next < 1){ onRemove(it.id); return } try{ await addToCart(it.productId, next); window.dispatchEvent(new CustomEvent('cart:refresh')) }catch(e){ alert(e.message) } } return (<div className='cart'><h3>Cart</h3>{items.length===0 && <p>Your cart is empty.</p>}{items.map(i=> <div key={i.id} className='cart-row'><div className='cart-name'>{i.name}</div><div className='cart-qty'><button className='qty' onClick={()=>updateQty(i,-1)}>-</button><span style={{padding:'0 8px'}}>x{i.qty}</span><button className='qty' onClick={()=>updateQty(i,1)}>+</button></div><div className='cart-price'>₹{(i.price*i.qty).toFixed(2)}</div><button className='remove' onClick={()=>onRemove(i.id)}>✕</button></div>) }<div className='cart-total'><span>Total</span><strong>₹{total.toFixed(2)}</strong></div></div>) }